# 问题 2：摘要需要注意什么？输出形式如何设计？

### 目标
为每份 PPT 生成结构化摘要，供检索、推荐、前端展示使用。摘要需要既能被大模型理解（用于语义检索），又要方便用户快速浏览。

### 注意事项
1. **结构化输出**：建议生成 JSON/Markdown 结构，包括：
   - `title`：PPT 标题或主题句。
   - `summary`：2-3 句概述（覆盖目标对象、核心内容、使用场景）。
   - `sections`：按章节/目录列出关键要点（数组形式，如“行业分析”“数据报告”等）。
   - `tags`：关键词列表（如“医疗”“蓝色”“商务汇报”），便于 faceted search。
   - `ideal_use_cases`：建议用途（年终汇报/产品发布/教育课件等）。
2. **控制长度**：每段 1-2 句，防止 embeddings 过长；整体摘要 ≤ 300 字，避免影响调用成本和索引效率。
3. **语言一致性**：面向中文用户，摘要以中文输出，必要时加入中英双语标签（例如 `tags_en`）以兼顾英文查询。
4. **可重放/可追溯**：摘要生成时保存原始 prompt 和模型响应，方便调试与回溯；如需批量重生成，支持重跑。
5. **敏感词与广告**：生成时应过滤站点自身的品牌词（如“第一PPT”）及广告描述，以免推广他人。

### 实现建议
- Prompt 里明确结构，要求模型以 JSON 返回；示例：
  ```json
  {
    "title": "...",
    "summary": "...",
    "sections": ["...", "..."],
    "tags": ["...", "..."],
    "ideal_use_cases": ["...", "..."]
  }
  ```
- 对 PPT 文稿进行抽取（例如读取第一页标题、目录页、各节标题和正文首句）作为上下文，避免直接喂整份 PPT。
- 对于生成失败或内容不足的 PPT，可退回到规则化摘要（例如仅用第一页 + 文件名生成 fallback）。

### 输出用途
1. **前端展示**：在详情页可直接显示 `summary`、`tags`、`ideal_use_cases`。
2. **检索**：`summary + sections + tags` 组成 embedding 输入，提升搜索相关性。
3. **推荐**：`tags`、`ideal_use_cases` 与用户行为（行业、颜色偏好等）交叉匹配，形成基于标签/语义的推荐。
